buildscript {
    repositories {
        maven {
            url = "https://s01.oss.sonatype.org/content/repositories/snapshots/"
        }
    }
    dependencies {
        classpath "com.exactpro.th2:th2-gradle-plugin:0.0.1-dev-5915772757-13a28ae-SNAPSHOT"
    }
}

plugins {
    // for run ./gradlew jmh
    id 'me.champeau.jmh' version '0.6.8'
}

apply plugin: "com.exactpro.th2.common-conventions"
apply plugin: "com.exactpro.th2.docker-conventions"

apply plugin: 'kotlin-kapt'

dependencies {
    api platform('com.exactpro.th2:bom:4.5.0')

    implementation "com.exactpro.th2:common:5.4.2-dev"
    implementation "com.exactpro.th2:common-utils:2.2.0-dev"
    implementation "com.exactpro.th2:codec:5.3.0-new-proto-+" //FIXME: migrate to release
    implementation 'javax.xml.bind:jaxb-api:2.3.1'

    implementation 'org.apache.avro:avro:1.11.1'
    implementation 'commons-io:commons-io:2.12.0'

    compileOnly 'com.google.auto.service:auto-service:1.0.1'
    testImplementation 'org.jetbrains.kotlin:kotlin-test-junit5:1.6.21'
    kapt 'com.google.auto.service:auto-service:1.0.1'

    jmh 'org.openjdk.jmh:jmh-core:1.36'
    jmh 'org.openjdk.jmh:jmh-generator-annprocess:1.36'
    jmhAnnotationProcessor 'org.openjdk.jmh:jmh-generator-annprocess:1.36'
}

jmh {
    //profilers = ['stack'] // Use profilers to collect additional data. Supported profilers: [cl, comp, gc, stack, perf, perfnorm, perfasm, xperf, xperfasm, hs_cl, hs_comp, hs_gc, hs_rt, hs_thr, async]
}
dependencyLocking {
    lockAllConfigurations()
}